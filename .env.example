# Tippy Environment Variables Template
# Ledger Reference: Tippy Decision Ledger v1.0 (Final), Â§25 (Environment, Credentials & Secrets Management)
#
# IMPORTANT: This file contains variable names only. Actual values must be stored in:
# - Doppler (production/staging/dev) per Â§25
# - GitHub Actions Secrets (CI/CD)
# - .env.local (local development, gitignored)
#
# NEVER commit actual secrets to the repository.
# See Ledger Â§25 for secrets management policy.

# ============================================================================
# Domain & URLs
# ============================================================================
TIPPY_DOMAIN=YOUR_TIPPY_DOMAIN_HERE
TIPPY_API_URL=YOUR_TIPPY_API_URL_HERE

# ============================================================================
# Supabase (Primary Data Platform per Ledger Â§4.1, Â§8.1)
# ============================================================================
# Supabase API endpoint
SUPABASE_URL=YOUR_SUPABASE_URL_HERE

# Supabase anonymous key (for client-side access)
SUPABASE_ANON_KEY=YOUR_SUPABASE_ANON_KEY_HERE

# Supabase service role key (for server-side operations, RLS bypass)
SUPABASE_SERVICE_ROLE_KEY=YOUR_SUPABASE_SERVICE_ROLE_KEY_HERE

# Direct Postgres connection string (for migrations)
SUPABASE_DB_URL=YOUR_SUPABASE_DB_URL_HERE

# JWT secret for verifying Supabase Auth tokens (per Ledger Â§8.1)
SUPABASE_JWT_SECRET=YOUR_SUPABASE_JWT_SECRET_HERE

# Optional: JWT issuer and audience (if custom)
SUPABASE_JWT_ISSUER=
SUPABASE_JWT_AUDIENCE=

# ============================================================================
# Yoco Payment Provider (per Ledger Â§1.5, Â§5, Â§6.1)
# ============================================================================
# Test environment keys (for dev/test)
YOCO_TEST_PUBLIC_KEY=YOUR_YOCO_TEST_PUBLIC_KEY_HERE
YOCO_TEST_SECRET_KEY=YOUR_YOCO_TEST_SECRET_KEY_HERE

# Live environment keys (for production)
YOCO_LIVE_PUBLIC_KEY=YOUR_YOCO_LIVE_PUBLIC_KEY_HERE
YOCO_LIVE_SECRET_KEY=YOUR_YOCO_LIVE_SECRET_KEY_HERE

# Webhook secret for verifying Yoco webhook signatures
YOCO_WEBHOOK_SECRET=YOUR_YOCO_WEBHOOK_SECRET_HERE

# Optional: Custom Yoco API URL
YOCO_API_URL=

# Fee configuration (defaults in code if not set)
YOCO_FEE_PERCENT=0.00

# ============================================================================
# Messaging - SendGrid (Primary Provider per Ledger Â§7.1, Â§25.2)
# ============================================================================
SENDGRID_API_KEY=YOUR_SENDGRID_API_KEY_HERE
SENDGRID_FROM_EMAIL=YOUR_SENDGRID_FROM_EMAIL_HERE
SENDGRID_FROM_PHONE=YOUR_SENDGRID_FROM_PHONE_HERE

# ============================================================================
# Messaging - Twilio (Secondary/Fallback Provider per Ledger Â§7.1)
# ============================================================================
TWILIO_ACCOUNT_SID=YOUR_TWILIO_ACCOUNT_SID_HERE
TWILIO_AUTH_TOKEN=YOUR_TWILIO_AUTH_TOKEN_HERE
TWILIO_PHONE_NUMBER=YOUR_TWILIO_PHONE_NUMBER_HERE

# ============================================================================
# CashSend (for Weekly Payouts per Ledger Â§9)
# ============================================================================
CASH_SEND_API_KEY=YOUR_CASH_SEND_API_KEY_HERE
CASH_SEND_API_SECRET=YOUR_CASH_SEND_API_SECRET_HERE

# ============================================================================
# Operational Config
# ============================================================================
# Environment: dev, staging, or prod
ENVIRONMENT=dev

# Node environment (development, test, production)
NODE_ENV=development

# Server port (default: 3000)
PORT=3000

# Log level: debug, info, warn, error
LOG_LEVEL=info

# Sentry DSN for error tracking (optional)
SENTRY_DSN=

# ============================================================================
# Fees & Calculations (per Ledger Â§5)
# ============================================================================
# Platform fee percentage (default: 10.00)
PLATFORM_FEE_PERCENT=10.00

# VAT rate percentage (default: 15.00)
VAT_RATE_PERCENT=15.00

# ============================================================================
# Payouts (per Ledger Â§9)
# ============================================================================
# CashSend fee in ZAR cents (default: 900 = R9.00)
CASH_SEND_FEE_ZAR=900

# Minimum eligibility for payout in ZAR cents (default: 50000 = R500)
PAYOUT_MIN_ELIGIBILITY_ZAR=50000

# Weekly payout schedule (default: Friday)
PAYOUT_WEEKLY_SCHEDULE=Friday

# ============================================================================
# QR Reassignment (per Ledger Â§3, Â§6.4)
# ============================================================================
# QR replacement fee in ZAR (default: 10.00)
QR_REPLACEMENT_FEE_ZAR=10.00

# ============================================================================
# Guard Registration Limits (per Ledger Â§24.4.5)
# ============================================================================
# Maximum guard registrations per referrer per day (default: 15)
GUARD_REGS_PER_REFERRER_PER_DAY=15

# Maximum guard registrations per device per day (default: 20)
GUARD_REGS_PER_DEVICE_PER_DAY=20

# Maximum guard registrations per IP per hour (default: 30)
GUARD_REGS_PER_IP_PER_HOUR=30

# ============================================================================
# Welcome SMS (per Ledger Â§24.3)
# ============================================================================
# Enable/disable welcome SMS (default: true)
SEND_GUARD_WELCOME_SMS=true

# Welcome SMS template ID (default: tippy_guard_welcome_v1)
WELCOME_SMS_TEMPLATE_ID=tippy_guard_welcome_v1

# Welcome SMS retry count (default: 3)
WELCOME_SMS_RETRY_COUNT=3

# Support phone number for welcome SMS
SUPPORT_PHONE_NUMBER=060-123-4567

# SMS provider selection (sendgrid or twilio, default: sendgrid)
SMS_PROVIDER=sendgrid

# Optional: Welcome SMS sender ID (fallback)
WELCOME_SMS_SENDER_ID=

# ============================================================================
# Legacy/Alternative Variable Names (for backward compatibility)
# ============================================================================
# These may be used in some scripts but prefer the primary names above
DB_URL=
TIPPY_DB_URL=
TIPPY_DB_PASSWORD=
SUPABASE_SERVICE_KEY=
TIPPY_SENDGRID_API_KEY=
TIPPY_TWILIO_API_KEY=
